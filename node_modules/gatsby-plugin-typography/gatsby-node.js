"use strict";

var fs = require("fs");
var path = require("path");
var os = require("os"

// Write out a typography module to .cache.

);exports.onPreBootstrap = function (_ref, pluginOptions) {
  var store = _ref.store;

  var program = store.getState().program;

  var module = void 0;
  if (pluginOptions.pathToConfigModule) {
    module = "module.exports = require(\"" + path.join(program.directory, pluginOptions.pathToConfigModule) + "\")";
    if (os.platform() == "win32") {
      module = module.split("\\").join("\\\\");
    }
  } else {
    module = "const Typography = require(\"typography\")\nconst typography = new Typography()\nmodule.exports = typography";
  }

  var dir = __dirname + "/.cache";

  if (!fs.existsSync(dir)) {
    fs.mkdirSync(dir);
  }

  fs.writeFileSync(dir + "/typography.js", module);
};